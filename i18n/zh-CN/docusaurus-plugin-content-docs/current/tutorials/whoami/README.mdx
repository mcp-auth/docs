---
sidebar_position: 1
sidebar_label: 'æ•™ç¨‹ï¼šæˆ‘æ˜¯è°ï¼Ÿ'
---

import TabItem from '@theme/TabItem';
import Tabs from '@theme/Tabs';

import SetupOauth from './_setup-oauth.mdx';
import SetupOidc from './_setup-oidc.mdx';

# æ•™ç¨‹ï¼šæˆ‘æ˜¯è°ï¼Ÿ (Tutorial: Who am I?)

æœ¬æ•™ç¨‹å°†å¼•å¯¼ä½ å®Œæˆè®¾ç½® MCP Auth ä»¥è®¤è¯ (Authentication) ç”¨æˆ·å¹¶ä»æˆæƒ (Authorization) æœåŠ¡å™¨è·å–å…¶èº«ä»½ä¿¡æ¯çš„è¿‡ç¨‹ã€‚

å®Œæˆæœ¬æ•™ç¨‹åï¼Œä½ å°†è·å¾—ï¼š

- âœ… å¯¹å¦‚ä½•ä½¿ç”¨ MCP Auth è¿›è¡Œç”¨æˆ·è®¤è¯ (Authentication) çš„åŸºæœ¬ç†è§£ã€‚
- âœ… ä¸€ä¸ª MCP æœåŠ¡å™¨ï¼Œæä¾›ç”¨äºè·å–ç”¨æˆ·èº«ä»½ä¿¡æ¯çš„å·¥å…·ã€‚

## æ¦‚è§ˆ (Overview) \{#overview}

æœ¬æ•™ç¨‹å°†æ¶‰åŠä»¥ä¸‹ç»„ä»¶ï¼š

- **MCP æœåŠ¡å™¨**ï¼šä¸€ä¸ªç®€å•çš„ MCP æœåŠ¡å™¨ï¼Œä½¿ç”¨ MCP å®˜æ–¹ SDK å¤„ç†è¯·æ±‚ã€‚
- **MCP inspector**ï¼šMCP æœåŠ¡å™¨çš„å¯è§†åŒ–æµ‹è¯•å·¥å…·ã€‚å®ƒè¿˜å……å½“ OAuth / OIDC å®¢æˆ·ç«¯ï¼Œå‘èµ·æˆæƒ (Authorization) æµç¨‹å¹¶è·å–è®¿é—®ä»¤ç‰Œ (Access token)ã€‚
- **æˆæƒ (Authorization) æœåŠ¡å™¨**ï¼šä¸€ä¸ª OAuth 2.1 æˆ– OpenID Connect æä¾›å•†ï¼Œç®¡ç†ç”¨æˆ·èº«ä»½å¹¶é¢å‘è®¿é—®ä»¤ç‰Œ (Access token)ã€‚

ä»¥ä¸‹æ˜¯è¿™äº›ç»„ä»¶ä¹‹é—´äº¤äº’çš„é«˜çº§æµç¨‹å›¾ï¼š

```mermaid
sequenceDiagram
    participant Client as MCP Inspector
    participant Server as MCP Server
    participant Auth as æˆæƒ (Authorization) æœåŠ¡å™¨

    Client->>Server: è¯·æ±‚å·¥å…· `whoami`
    Server->>Client: è¿”å› 401 æœªæˆæƒ (Unauthorized)
    Client->>Auth: å‘èµ·æˆæƒ (Authorization) æµç¨‹
    Auth->>Auth: å®Œæˆæˆæƒ (Authorization) æµç¨‹
    Auth->>Client: å¸¦æˆæƒç é‡å®šå‘å›å®¢æˆ·ç«¯
    Client->>Auth: ç”¨æˆæƒç æ¢å–è®¿é—®ä»¤ç‰Œ (Access token)
    Auth->>Client: è¿”å›è®¿é—®ä»¤ç‰Œ (Access token)
    Client->>Server: æºå¸¦è®¿é—®ä»¤ç‰Œ (Access token) è¯·æ±‚ `whoami`
    Server->>Auth: ç”¨è®¿é—®ä»¤ç‰Œ (Access token) è·å–ç”¨æˆ·èº«ä»½
    Auth->>Server: è¿”å›ç”¨æˆ·èº«ä»½
    Server->>Client: è¿”å›ç”¨æˆ·èº«ä»½
```

## äº†è§£ä½ çš„æˆæƒ (Authorization) æœåŠ¡å™¨ \{#understand-your-authorization-server}

### è·å–ç”¨æˆ·èº«ä»½ä¿¡æ¯ (Retrieving user identity information) \{#retrieving-user-identity-information}

è¦å®Œæˆæœ¬æ•™ç¨‹ï¼Œä½ çš„æˆæƒ (Authorization) æœåŠ¡å™¨åº”æä¾›ç”¨äºè·å–ç”¨æˆ·èº«ä»½ä¿¡æ¯çš„ APIï¼š

<Tabs groupId="provider">
<TabItem value="logto" label="Logto">

[Logto](https://logto.io) æ˜¯ä¸€ä¸ª OpenID Connect æä¾›å•†ï¼Œæ”¯æŒæ ‡å‡†çš„ [userinfo ç«¯ç‚¹](https://openid.net/specs/openid-connect-core-1_0.html#UserInfo) ç”¨äºè·å–ç”¨æˆ·èº«ä»½ä¿¡æ¯ã€‚

è¦è·å–å¯ç”¨äºè®¿é—® userinfo ç«¯ç‚¹çš„è®¿é—®ä»¤ç‰Œ (Access token)ï¼Œè‡³å°‘éœ€è¦ä¸¤ä¸ªæƒé™ (Scopes)ï¼š`openid` å’Œ `profile`ã€‚ä½ å¯ä»¥ç»§ç»­é˜…è¯»ï¼Œåç»­ä¼šä»‹ç»æƒé™ (Scope) é…ç½®ã€‚

</TabItem>
<TabItem value="keycloak" label="Keycloak">

[Keycloak](https://www.keycloak.org) æ˜¯ä¸€ä¸ªå¼€æºèº«ä»½å’Œè®¿é—®ç®¡ç†è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒå¤šç§åè®®ï¼ŒåŒ…æ‹¬ OpenID Connect (OIDC)ã€‚ä½œä¸º OIDC æä¾›å•†ï¼Œå®ƒå®ç°äº†æ ‡å‡†çš„ [userinfo ç«¯ç‚¹](https://openid.net/specs/openid-connect-core-1_0.html#UserInfo) ç”¨äºè·å–ç”¨æˆ·èº«ä»½ä¿¡æ¯ã€‚

è¦è·å–å¯ç”¨äºè®¿é—® userinfo ç«¯ç‚¹çš„è®¿é—®ä»¤ç‰Œ (Access token)ï¼Œè‡³å°‘éœ€è¦ä¸¤ä¸ªæƒé™ (Scopes)ï¼š`openid` å’Œ `profile`ã€‚ä½ å¯ä»¥ç»§ç»­é˜…è¯»ï¼Œåç»­ä¼šä»‹ç»æƒé™ (Scope) é…ç½®ã€‚

</TabItem>
<TabItem value="oidc" label="OIDC">

å¤§å¤šæ•° OpenID Connect æä¾›å•†éƒ½æ”¯æŒ [userinfo ç«¯ç‚¹](https://openid.net/specs/openid-connect-core-1_0.html#UserInfo) ç”¨äºè·å–ç”¨æˆ·èº«ä»½ä¿¡æ¯ã€‚

è¯·æŸ¥é˜…ä½ çš„æä¾›å•†æ–‡æ¡£ï¼Œç¡®è®¤æ˜¯å¦æ”¯æŒè¯¥ç«¯ç‚¹ã€‚å¦‚æœä½ çš„æä¾›å•†æ”¯æŒ [OpenID Connect Discovery](https://openid.net/specs/openid-connect-discovery-1_0.html)ï¼Œä½ ä¹Ÿå¯ä»¥æ£€æŸ¥ discovery æ–‡æ¡£ï¼ˆ`.well-known/openid-configuration` ç«¯ç‚¹çš„å“åº”ï¼‰ä¸­æ˜¯å¦åŒ…å« `userinfo_endpoint`ã€‚

è¦è·å–å¯ç”¨äºè®¿é—® userinfo ç«¯ç‚¹çš„è®¿é—®ä»¤ç‰Œ (Access token)ï¼Œè‡³å°‘éœ€è¦ä¸¤ä¸ªæƒé™ (Scopes)ï¼š`openid` å’Œ `profile`ã€‚è¯·æŸ¥é˜…ä½ çš„æä¾›å•†æ–‡æ¡£ï¼Œäº†è§£æƒé™ (Scopes) ä¸ç”¨æˆ·èº«ä»½å£°æ˜ (Claims) çš„æ˜ å°„å…³ç³»ã€‚

</TabItem>
<TabItem value="oauth" label="OAuth 2">

è™½ç„¶ OAuth 2.0 æ²¡æœ‰å®šä¹‰è·å–ç”¨æˆ·èº«ä»½ä¿¡æ¯çš„æ ‡å‡†æ–¹å¼ï¼Œä½†è®¸å¤šæä¾›å•†å®ç°äº†è‡ªå·±çš„ç«¯ç‚¹ã€‚è¯·æŸ¥é˜…ä½ çš„æä¾›å•†æ–‡æ¡£ï¼Œäº†è§£å¦‚ä½•ä½¿ç”¨è®¿é—®ä»¤ç‰Œ (Access token) è·å–ç”¨æˆ·èº«ä»½ä¿¡æ¯ï¼Œä»¥åŠåœ¨å‘èµ·æˆæƒ (Authorization) æµç¨‹æ—¶è·å–è¯¥è®¿é—®ä»¤ç‰Œ (Access token) æ‰€éœ€çš„å‚æ•°ã€‚

</TabItem>
</Tabs>

### åŠ¨æ€å®¢æˆ·ç«¯æ³¨å†Œ (Dynamic Client Registration) \{#dynamic-client-registration}

æœ¬æ•™ç¨‹ä¸è¦æ±‚åŠ¨æ€å®¢æˆ·ç«¯æ³¨å†Œï¼Œä½†å¦‚æœä½ å¸Œæœ›è‡ªåŠ¨åŒ– MCP å®¢æˆ·ç«¯åœ¨æˆæƒ (Authorization) æœåŠ¡å™¨çš„æ³¨å†Œæµç¨‹ï¼Œå®ƒä¼šå¾ˆæœ‰ç”¨ã€‚è¯¦è§ [æ˜¯å¦éœ€è¦åŠ¨æ€å®¢æˆ·ç«¯æ³¨å†Œï¼Ÿ](../../provider-list.mdx#is-dcr-required)ã€‚

## æ­å»º MCP æœåŠ¡å™¨ \{#set-up-the-mcp-server}

æˆ‘ä»¬å°†ä½¿ç”¨ [MCP å®˜æ–¹ SDK](https://github.com/modelcontextprotocol) åˆ›å»ºä¸€ä¸ªå¸¦æœ‰ `whoami` å·¥å…·çš„ MCP æœåŠ¡å™¨ï¼Œç”¨äºä»æˆæƒ (Authorization) æœåŠ¡å™¨è·å–ç”¨æˆ·èº«ä»½ä¿¡æ¯ã€‚

### åˆ›å»ºæ–°é¡¹ç›® (Create a new project) \{#create-a-new-project}

<Tabs groupId="sdk">
<TabItem value="python" label="Python">

```bash
mkdir mcp-server
cd mcp-server
uv init # æˆ–ä½¿ç”¨ `pipenv` æˆ– `poetry` åˆ›å»ºæ–°è™šæ‹Ÿç¯å¢ƒ
```

</TabItem>
<TabItem value="node" label="Node.js">

åˆ›å»ºä¸€ä¸ªæ–°çš„ Node.js é¡¹ç›®ï¼š

```bash
mkdir mcp-server
cd mcp-server
npm init -y # æˆ–ä½¿ç”¨ `pnpm init`
npm pkg set type="module"
npm pkg set main="whoami.js"
npm pkg set scripts.start="node whoami.js"
```

</TabItem>
</Tabs>

### å®‰è£… MCP SDK åŠä¾èµ– (Install the MCP SDK and dependencies) \{#install-the-mcp-sdk-and-dependencies}

<Tabs groupId="sdk">
<TabItem value="python" label="Python">

```bash
pip install "mcp[cli]" starlette uvicorn
```

æˆ–ä½¿ç”¨ä½ å–œæ¬¢çš„å…¶ä»–åŒ…ç®¡ç†å™¨ï¼Œå¦‚ `uv` æˆ– `poetry`ã€‚

</TabItem>
<TabItem value="node" label="Node.js">

```bash
npm install @modelcontextprotocol/sdk express
```

æˆ–ä½¿ç”¨ä½ å–œæ¬¢çš„å…¶ä»–åŒ…ç®¡ç†å™¨ï¼Œå¦‚ `pnpm` æˆ– `yarn`ã€‚

</TabItem>
</Tabs>

### åˆ›å»º MCP æœåŠ¡å™¨ (Create the MCP server) \{#create-the-mcp-server}

é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå®ç° `whoami` å·¥å…·çš„ MCP æœåŠ¡å™¨ã€‚

<Tabs groupId="sdk">
<TabItem value="python" label="Python">

åˆ›å»ºåä¸º `whoami.py` çš„æ–‡ä»¶ï¼Œå¹¶æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š

```python
from mcp.server.fastmcp import FastMCP
from starlette.applications import Starlette
from starlette.routing import Mount
from typing import Any

mcp = FastMCP("WhoAmI")

@mcp.tool()
def whoami() -> dict[str, Any]:
    """è¿”å›å½“å‰ç”¨æˆ·ä¿¡æ¯çš„å·¥å…·ã€‚"""
    return {"error": "Not authenticated"}

app = Starlette(
    routes=[Mount('/', app=mcp.sse_app())]
)
```

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡ŒæœåŠ¡å™¨ï¼š

```bash
uvicorn whoami:app --host 0.0.0.0 --port 3001
```

</TabItem>
<TabItem value="node" label="Node.js">

:::note
ç”±äºå½“å‰ MCP inspector å®ç°å°šæœªå¤„ç†æˆæƒ (Authorization) æµç¨‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ SSE æ–¹å¼æ­å»º MCP æœåŠ¡å™¨ã€‚å¾… MCP inspector æ”¯æŒæˆæƒ (Authorization) æµç¨‹åï¼Œæˆ‘ä»¬ä¼šæ›´æ–°æ­¤å¤„ä»£ç ã€‚
:::

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ `pnpm` æˆ– `yarn`ã€‚

åˆ›å»ºåä¸º `whoami.js` çš„æ–‡ä»¶ï¼Œå¹¶æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š

```js
import { McpServer } from '@modelcontextprotocol/sdk/server/mcp.js';
import { SSEServerTransport } from '@modelcontextprotocol/sdk/server/sse.js';
import express from 'express';

// åˆ›å»º MCP æœåŠ¡å™¨
const server = new McpServer({
  name: 'WhoAmI',
  version: '0.0.0',
});

// æ·»åŠ ä¸€ä¸ªè¿”å›å½“å‰ç”¨æˆ·ä¿¡æ¯çš„å·¥å…·
server.tool('whoami', async () => {
  return {
    content: [{ type: 'text', text: JSON.stringify({ error: 'Not authenticated' }) }],
  };
});

// ä»¥ä¸‹ä¸º MCP SDK æ–‡æ¡£ä¸­çš„æ ·æ¿ä»£ç 
const PORT = 3001;
const app = express();

const transports = {};

app.get('/sse', async (_req, res) => {
  const transport = new SSEServerTransport('/messages', res);
  transports[transport.sessionId] = transport;

  res.on('close', () => {
    delete transports[transport.sessionId];
  });

  await server.connect(transport);
});

app.post('/messages', async (req, res) => {
  const sessionId = String(req.query.sessionId);
  const transport = transports[sessionId];
  if (transport) {
    await transport.handlePostMessage(req, res, req.body);
  } else {
    res.status(400).send('No transport found for sessionId');
  }
});

app.listen(PORT);
```

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡ŒæœåŠ¡å™¨ï¼š

```bash
npm start
```

</TabItem>
</Tabs>

## æ£€æŸ¥ MCP æœåŠ¡å™¨ (Inspect the MCP server) \{#inspect-the-mcp-server}

### å…‹éš†å¹¶è¿è¡Œ MCP inspector (Clone and run MCP inspector) \{#clone-and-run-mcp-inspector}

ç°åœ¨ MCP æœåŠ¡å™¨å·²è¿è¡Œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ MCP inspector æ£€æŸ¥ `whoami` å·¥å…·æ˜¯å¦å¯ç”¨ã€‚

ç”±äºå½“å‰å®ç°çš„é™åˆ¶ï¼Œæˆ‘ä»¬ fork äº† [MCP inspector](https://github.com/mcp-auth/inspector)ï¼Œä½¿å…¶åœ¨è®¤è¯ (Authentication) å’Œæˆæƒ (Authorization) æ–¹é¢æ›´çµæ´»å’Œå¯æ‰©å±•ã€‚æˆ‘ä»¬ä¹Ÿå·²å‘åŸä»“åº“æäº¤äº† pull requestã€‚

è¿è¡Œ MCP inspectorï¼Œå¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼ˆéœ€è¦ Node.jsï¼‰ï¼š

```bash
git clone https://github.com/mcp-auth/inspector.git
cd inspector
npm install
npm run dev
```

ç„¶åï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ `http://localhost:6274/`ï¼ˆæˆ–ç»ˆç«¯æ˜¾ç¤ºçš„å…¶ä»– URLï¼‰è®¿é—® MCP inspectorã€‚

### è¿æ¥ MCP inspector åˆ° MCP æœåŠ¡å™¨ (Connect MCP inspector to the MCP server) \{#connect-mcp-inspector-to-the-mcp-server}

åœ¨ç»§ç»­ä¹‹å‰ï¼Œè¯·æ£€æŸ¥ MCP inspector ä¸­çš„ä»¥ä¸‹é…ç½®ï¼š

- **Transport Type**ï¼šè®¾ç½®ä¸º `SSE`ã€‚
- **URL**ï¼šè®¾ç½®ä¸ºä½ çš„ MCP æœåŠ¡å™¨çš„ URLã€‚æ­¤å¤„åº”ä¸º `http://localhost:3001/sse`ã€‚

ç°åœ¨ä½ å¯ä»¥ç‚¹å‡»â€œConnectâ€æŒ‰é’®ï¼ŒæŸ¥çœ‹ MCP inspector æ˜¯å¦èƒ½è¿æ¥åˆ° MCP æœåŠ¡å™¨ã€‚å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä½ å°†åœ¨ MCP inspector ä¸­çœ‹åˆ°â€œConnectedâ€çŠ¶æ€ã€‚

### æ£€æŸ¥ç‚¹ï¼šè¿è¡Œ `whoami` å·¥å…· (Checkpoint: Run the `whoami` tool) \{#checkpoint-run-the-whoami-tool}

1. åœ¨ MCP inspector é¡¶éƒ¨èœå•ç‚¹å‡» "Tools" æ ‡ç­¾é¡µã€‚
2. ç‚¹å‡» "List Tools" æŒ‰é’®ã€‚
3. ä½ åº”è¯¥èƒ½åœ¨é¡µé¢ä¸Šçœ‹åˆ° `whoami` å·¥å…·ï¼Œç‚¹å‡»å®ƒæŸ¥çœ‹å·¥å…·è¯¦æƒ…ã€‚
4. åœ¨å³ä¾§ä½ ä¼šçœ‹åˆ° "Run Tool" æŒ‰é’®ï¼Œç‚¹å‡»è¿è¡Œè¯¥å·¥å…·ã€‚
5. ä½ å°†çœ‹åˆ°å·¥å…·è¿”å›çš„ JSON å“åº” `{"error": "Not authenticated"}`ã€‚

![MCP inspector é¦–æ¬¡è¿è¡Œ](/docs-assets/images/tutorials/whoami/inspector-first-run.png)

## é›†æˆä½ çš„æˆæƒ (Authorization) æœåŠ¡å™¨ (Integrate with your authorization server) \{#integrate-with-your-authorization-server}

å®Œæˆæœ¬èŠ‚å†…å®¹æ—¶ï¼Œä½ éœ€è¦è€ƒè™‘ä»¥ä¸‹äº‹é¡¹ï¼š

<details>
<summary>**ä½ çš„æˆæƒ (Authorization) æœåŠ¡å™¨çš„å‘è¡Œè€… (Issuer) URL**</summary>

é€šå¸¸æ˜¯ä½ çš„æˆæƒ (Authorization) æœåŠ¡å™¨çš„åŸºç¡€ URLï¼Œå¦‚ `https://auth.example.com`ã€‚æœ‰äº›æä¾›å•†å¯èƒ½æ˜¯ç±»ä¼¼ `https://example.logto.app/oidc` çš„è·¯å¾„ï¼Œè¯·æŸ¥é˜…ä½ çš„æä¾›å•†æ–‡æ¡£ã€‚

</details>

<details>
<summary>**å¦‚ä½•è·å–æˆæƒ (Authorization) æœåŠ¡å™¨å…ƒæ•°æ®**</summary>

- å¦‚æœä½ çš„æˆæƒ (Authorization) æœåŠ¡å™¨ç¬¦åˆ [OAuth 2.0 æˆæƒæœåŠ¡å™¨å…ƒæ•°æ®](https://datatracker.ietf.org/doc/html/rfc8414) æˆ– [OpenID Connect Discovery](https://openid.net/specs/openid-connect-discovery-1_0.html)ï¼Œä½ å¯ä»¥ä½¿ç”¨ MCP Auth å†…ç½®å·¥å…·è‡ªåŠ¨è·å–å…ƒæ•°æ®ã€‚
- å¦‚æœä¸ç¬¦åˆè¿™äº›æ ‡å‡†ï¼Œä½ éœ€è¦åœ¨ MCP æœåŠ¡å™¨é…ç½®ä¸­æ‰‹åŠ¨æŒ‡å®šå…ƒæ•°æ® URL æˆ–ç«¯ç‚¹ã€‚è¯·æŸ¥é˜…ä½ çš„æä¾›å•†æ–‡æ¡£è·å–å…·ä½“ç«¯ç‚¹ã€‚

</details>

<details>
<summary>**å¦‚ä½•å°† MCP inspector æ³¨å†Œä¸ºæˆæƒ (Authorization) æœåŠ¡å™¨çš„å®¢æˆ·ç«¯**</summary>

- å¦‚æœä½ çš„æˆæƒ (Authorization) æœåŠ¡å™¨æ”¯æŒ [åŠ¨æ€å®¢æˆ·ç«¯æ³¨å†Œ (Dynamic Client Registration)](https://datatracker.ietf.org/doc/html/rfc7591)ï¼Œå¯ä»¥è·³è¿‡æ­¤æ­¥éª¤ï¼ŒMCP inspector ä¼šè‡ªåŠ¨æ³¨å†Œä¸ºå®¢æˆ·ç«¯ã€‚
- å¦‚æœä¸æ”¯æŒåŠ¨æ€å®¢æˆ·ç«¯æ³¨å†Œï¼Œä½ éœ€è¦æ‰‹åŠ¨åœ¨æˆæƒ (Authorization) æœåŠ¡å™¨ä¸­æ³¨å†Œ MCP inspector ä¸ºå®¢æˆ·ç«¯ã€‚

</details>

<details>
<summary>**å¦‚ä½•è·å–ç”¨æˆ·èº«ä»½ä¿¡æ¯ä»¥åŠå¦‚ä½•é…ç½®æˆæƒ (Authorization) è¯·æ±‚å‚æ•°**</summary>

- å¯¹äº OpenID Connect æä¾›å•†ï¼šé€šå¸¸åœ¨å‘èµ·æˆæƒ (Authorization) æµç¨‹æ—¶éœ€è¦è¯·æ±‚è‡³å°‘ `openid` å’Œ `profile` æƒé™ (Scopes)ã€‚è¿™æ ·æˆæƒ (Authorization) æœåŠ¡å™¨è¿”å›çš„è®¿é—®ä»¤ç‰Œ (Access token) å°±åŒ…å«è®¿é—® [userinfo ç«¯ç‚¹](https://openid.net/specs/openid-connect-core-1_0.html#UserInfo) æ‰€éœ€çš„æƒé™ (Scopes)ã€‚

  æ³¨æ„ï¼šéƒ¨åˆ†æä¾›å•†å¯èƒ½ä¸æ”¯æŒ userinfo ç«¯ç‚¹ã€‚

- å¯¹äº OAuth 2.0 / OAuth 2.1 æä¾›å•†ï¼šè¯·æŸ¥é˜…ä½ çš„æä¾›å•†æ–‡æ¡£ï¼Œäº†è§£å¦‚ä½•ä½¿ç”¨è®¿é—®ä»¤ç‰Œ (Access token) è·å–ç”¨æˆ·èº«ä»½ä¿¡æ¯ï¼Œä»¥åŠå‘èµ·æˆæƒ (Authorization) æµç¨‹æ—¶è·å–è¯¥è®¿é—®ä»¤ç‰Œ (Access token) æ‰€éœ€çš„å‚æ•°ã€‚

</details>

è™½ç„¶æ¯ä¸ªæä¾›å•†å¯èƒ½æœ‰è‡ªå·±çš„å…·ä½“è¦æ±‚ï¼Œä»¥ä¸‹æ­¥éª¤å°†æŒ‡å¯¼ä½ å¦‚ä½•ç»“åˆ MCP inspector å’Œ MCP æœåŠ¡å™¨è¿›è¡Œé’ˆå¯¹ä¸åŒæä¾›å•†çš„é…ç½®é›†æˆã€‚

### æ³¨å†Œ MCP inspector ä¸ºå®¢æˆ·ç«¯ (Register MCP inspector as a client) \{#register-mcp-inspector-as-a-client}

<Tabs groupId="provider">
<TabItem value="logto" label="Logto">

ä¸ [Logto](https://logto.io) é›†æˆéå¸¸ç®€å•ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªæ”¯æŒæ ‡å‡† [userinfo ç«¯ç‚¹](https://openid.net/specs/openid-connect-core-1_0.html#UserInfo) çš„ OpenID Connect æä¾›å•†ã€‚

ç”±äº Logto ç›®å‰å°šä¸æ”¯æŒåŠ¨æ€å®¢æˆ·ç«¯æ³¨å†Œ (Dynamic Client Registration)ï¼Œä½ éœ€è¦æ‰‹åŠ¨åœ¨ Logto ç§Ÿæˆ·ä¸­æ³¨å†Œ MCP inspector ä¸ºå®¢æˆ·ç«¯ï¼š

1. æ‰“å¼€ MCP inspectorï¼Œç‚¹å‡» "OAuth Configuration" æŒ‰é’®ã€‚å¤åˆ¶ **Redirect URL (auto-populated)**ï¼Œå¦‚ `http://localhost:6274/oauth/callback`ã€‚
2. ç™»å½• [Logto Console](https://cloud.logto.io)ï¼ˆæˆ–ä½ çš„è‡ªæ‰˜ç®¡ Logto Consoleï¼‰ã€‚
3. è¿›å…¥ "Applications" æ ‡ç­¾é¡µï¼Œç‚¹å‡» "Create application"ã€‚åœ¨é¡µé¢åº•éƒ¨ç‚¹å‡» "Create app without framework"ã€‚
4. å¡«å†™åº”ç”¨è¯¦æƒ…ï¼Œç„¶åç‚¹å‡» "Create application"ï¼š
   - **é€‰æ‹©åº”ç”¨ç±»å‹**ï¼šé€‰æ‹© "Single-page application"ã€‚
   - **åº”ç”¨åç§°**ï¼šå¦‚ "MCP Inspector"ã€‚
5. åœ¨ "Settings / Redirect URIs" åŒºåŸŸï¼Œç²˜è´´åˆšæ‰å¤åˆ¶çš„ **Redirect URL (auto-populated)**ï¼Œç„¶åç‚¹å‡»åº•éƒ¨æ çš„ "Save changes"ã€‚
6. åœ¨é¡¶éƒ¨å¡ç‰‡ä¸­ï¼Œä½ ä¼šçœ‹åˆ° "App ID"ã€‚å¤åˆ¶å®ƒã€‚
7. å›åˆ° MCP inspectorï¼Œåœ¨ "OAuth Configuration" åŒºåŸŸçš„ "Client ID" å­—æ®µç²˜è´´ "App ID"ã€‚
8. åœ¨ "Auth Params" å­—æ®µè¾“å…¥ `{"scope": "openid profile email"}`ï¼Œç¡®ä¿ Logto è¿”å›çš„è®¿é—®ä»¤ç‰Œ (Access token) åŒ…å«è®¿é—® userinfo ç«¯ç‚¹æ‰€éœ€çš„æƒé™ (Scopes)ã€‚

</TabItem>
<TabItem value="keycloak" label="Keycloak">

[Keycloak](https://www.keycloak.org) æ˜¯ä¸€ä¸ªå¼€æºèº«ä»½å’Œè®¿é—®ç®¡ç†è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒ OpenID Connect åè®®ã€‚

è™½ç„¶ Keycloak æ”¯æŒåŠ¨æ€å®¢æˆ·ç«¯æ³¨å†Œ (Dynamic Client Registration)ï¼Œä½†å…¶å®¢æˆ·ç«¯æ³¨å†Œç«¯ç‚¹ä¸æ”¯æŒ CORSï¼Œå¯¼è‡´å¤§å¤šæ•° MCP å®¢æˆ·ç«¯æ— æ³•ç›´æ¥æ³¨å†Œã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨æ³¨å†Œå®¢æˆ·ç«¯ã€‚

:::note
Keycloak å¯é€šè¿‡ [å¤šç§æ–¹å¼](https://www.keycloak.org/guides#getting-started) å®‰è£…ï¼ˆè£¸æœºã€kubernetes ç­‰ï¼‰ï¼Œæœ¬æ•™ç¨‹é‡‡ç”¨ Docker å¿«é€Ÿæ­å»ºã€‚
:::

è®©æˆ‘ä»¬æ­å»º Keycloak å®ä¾‹å¹¶è¿›è¡Œé…ç½®ï¼š

1. æŒ‰ [å®˜æ–¹æ–‡æ¡£](https://www.keycloak.org/getting-started/getting-started-docker) ä½¿ç”¨ Docker è¿è¡Œ Keycloakï¼š

```bash
docker run -p 8080:8080 -e KC_BOOTSTRAP_ADMIN_USERNAME=admin -e KC_BOOTSTRAP_ADMIN_PASSWORD=admin quay.io/keycloak/keycloak:26.2.4 start-dev
```

2. è®¿é—® Keycloak ç®¡ç†æ§åˆ¶å° (http://localhost:8080/admin)ï¼Œä½¿ç”¨ä»¥ä¸‹å‡­æ®ç™»å½•ï¼š

   - ç”¨æˆ·åï¼š`admin`
   - å¯†ç ï¼š`admin`

3. åˆ›å»ºæ–° Realmï¼š

   - å·¦ä¸Šè§’ç‚¹å‡» "Create Realm"
   - "Realm name" å¡«å†™ `mcp-realm`
   - ç‚¹å‡» "Create"

4. åˆ›å»ºæµ‹è¯•ç”¨æˆ·ï¼š

   - å·¦ä¾§èœå•ç‚¹å‡» "Users"
   - ç‚¹å‡» "Create new user"
   - å¡«å†™ç”¨æˆ·ä¿¡æ¯ï¼š
     - ç”¨æˆ·åï¼š`testuser`
     - åå­—å’Œå§“æ°å¯ä»»æ„å¡«å†™
   - ç‚¹å‡» "Create"
   - åœ¨ "Credentials" æ ‡ç­¾é¡µè®¾ç½®å¯†ç ï¼Œå¹¶å–æ¶ˆå‹¾é€‰ "Temporary"

5. æ³¨å†Œ MCP Inspector ä¸ºå®¢æˆ·ç«¯ï¼š

   - æ‰“å¼€ MCP inspectorï¼Œç‚¹å‡» "OAuth Configuration" æŒ‰é’®ã€‚å¤åˆ¶ **Redirect URL (auto-populated)**ï¼Œå¦‚ `http://localhost:6274/oauth/callback`ã€‚
   - åœ¨ Keycloak ç®¡ç†æ§åˆ¶å°å·¦ä¾§ç‚¹å‡» "Clients"
   - ç‚¹å‡» "Create client"
   - å¡«å†™å®¢æˆ·ç«¯ä¿¡æ¯ï¼š
     - Client type: é€‰æ‹© "OpenID Connect"
     - Client ID: è¾“å…¥ `mcp-inspector`
     - ç‚¹å‡» "Next"
   - "Capability config" é¡µé¢ï¼š
     - ç¡®ä¿ "Standard flow" å·²å¯ç”¨
     - ç‚¹å‡» "Next"
   - "Login settings" é¡µé¢ï¼š
     - åœ¨ "Valid redirect URIs" ç²˜è´´ MCP Inspector å›è°ƒ URL
     - "Web origins" å¡«å†™ `http://localhost:6274`
     - ç‚¹å‡» "Save"
   - å¤åˆ¶ "Client ID"ï¼ˆå³ `mcp-inspector`ï¼‰

6. å›åˆ° MCP Inspectorï¼š
   - åœ¨ "OAuth Configuration" åŒºåŸŸçš„ "Client ID" å­—æ®µç²˜è´´å¤åˆ¶çš„ Client ID
   - åœ¨ "Auth Params" å­—æ®µè¾“å…¥ä»¥ä¸‹å†…å®¹ä»¥è¯·æ±‚æ‰€éœ€æƒé™ (Scopes)ï¼š

```json
{ "scope": "openid profile email" }
```

</TabItem>
<TabItem value="oidc" label="OIDC">

:::note
è¿™æ˜¯é€šç”¨ OpenID Connect æä¾›å•†é›†æˆæŒ‡å—ã€‚å…·ä½“ç»†èŠ‚è¯·æŸ¥é˜…ä½ çš„æä¾›å•†æ–‡æ¡£ã€‚
:::

å¦‚æœä½ çš„ OpenID Connect æä¾›å•†æ”¯æŒåŠ¨æ€å®¢æˆ·ç«¯æ³¨å†Œ (Dynamic Client Registration)ï¼Œå¯ç›´æ¥è·³åˆ°ç¬¬ 8 æ­¥é…ç½® MCP inspectorï¼›å¦åˆ™éœ€æ‰‹åŠ¨æ³¨å†Œ MCP inspector ä¸ºå®¢æˆ·ç«¯ï¼š

1. æ‰“å¼€ MCP inspectorï¼Œç‚¹å‡» "OAuth Configuration" æŒ‰é’®ã€‚å¤åˆ¶ **Redirect URL (auto-populated)**ï¼Œå¦‚ `http://localhost:6274/oauth/callback`ã€‚
2. ç™»å½•ä½ çš„ OpenID Connect æä¾›å•†æ§åˆ¶å°ã€‚
3. è¿›å…¥ "Applications" æˆ– "Clients" åŒºåŸŸï¼Œåˆ›å»ºæ–°åº”ç”¨æˆ–å®¢æˆ·ç«¯ã€‚
4. å¦‚éœ€é€‰æ‹©å®¢æˆ·ç«¯ç±»å‹ï¼Œé€‰æ‹© "Single-page application" æˆ– "Public client"ã€‚
5. åˆ›å»ºåº”ç”¨åï¼Œéœ€é…ç½®é‡å®šå‘ URIã€‚ç²˜è´´åˆšæ‰å¤åˆ¶çš„ **Redirect URL (auto-populated)**ã€‚
6. æ‰¾åˆ°æ–°å»ºåº”ç”¨çš„ "Client ID" æˆ– "Application ID"ï¼Œå¤åˆ¶å®ƒã€‚
7. å›åˆ° MCP inspectorï¼Œåœ¨ "OAuth Configuration" åŒºåŸŸçš„ "Client ID" å­—æ®µç²˜è´´è¯¥å€¼ã€‚
8. å¯¹äºæ ‡å‡† OpenID Connect æä¾›å•†ï¼Œå¯åœ¨ "Auth Params" å­—æ®µè¾“å…¥ä»¥ä¸‹å†…å®¹ä»¥è¯·æ±‚è®¿é—® userinfo ç«¯ç‚¹æ‰€éœ€æƒé™ (Scopes)ï¼š

```json
{ "scope": "openid profile email" }
```

</TabItem>
<TabItem value="oauth" label="OAuth 2">

:::note
è¿™æ˜¯é€šç”¨ OAuth 2.0 / OAuth 2.1 æä¾›å•†é›†æˆæŒ‡å—ã€‚å…·ä½“ç»†èŠ‚è¯·æŸ¥é˜…ä½ çš„æä¾›å•†æ–‡æ¡£ã€‚
:::

å¦‚æœä½ çš„ OAuth 2.0 / OAuth 2.1 æä¾›å•†æ”¯æŒåŠ¨æ€å®¢æˆ·ç«¯æ³¨å†Œ (Dynamic Client Registration)ï¼Œå¯ç›´æ¥è·³åˆ°ç¬¬ 8 æ­¥é…ç½® MCP inspectorï¼›å¦åˆ™éœ€æ‰‹åŠ¨æ³¨å†Œ MCP inspector ä¸ºå®¢æˆ·ç«¯ï¼š

1. æ‰“å¼€ MCP inspectorï¼Œç‚¹å‡» "OAuth Configuration" æŒ‰é’®ã€‚å¤åˆ¶ **Redirect URL (auto-populated)**ï¼Œå¦‚ `http://localhost:6274/oauth/callback`ã€‚
2. ç™»å½•ä½ çš„ OAuth 2.0 / OAuth 2.1 æä¾›å•†æ§åˆ¶å°ã€‚
3. è¿›å…¥ "Applications" æˆ– "Clients" åŒºåŸŸï¼Œåˆ›å»ºæ–°åº”ç”¨æˆ–å®¢æˆ·ç«¯ã€‚
4. å¦‚éœ€é€‰æ‹©å®¢æˆ·ç«¯ç±»å‹ï¼Œé€‰æ‹© "Single-page application" æˆ– "Public client"ã€‚
5. åˆ›å»ºåº”ç”¨åï¼Œéœ€é…ç½®é‡å®šå‘ URIã€‚ç²˜è´´åˆšæ‰å¤åˆ¶çš„ **Redirect URL (auto-populated)**ã€‚
6. æ‰¾åˆ°æ–°å»ºåº”ç”¨çš„ "Client ID" æˆ– "Application ID"ï¼Œå¤åˆ¶å®ƒã€‚
7. å›åˆ° MCP inspectorï¼Œåœ¨ "OAuth Configuration" åŒºåŸŸçš„ "Client ID" å­—æ®µç²˜è´´è¯¥å€¼ã€‚
8. æŸ¥é˜…ä½ çš„æä¾›å•†æ–‡æ¡£ï¼Œäº†è§£å¦‚ä½•è·å–ç”¨äºç”¨æˆ·èº«ä»½ä¿¡æ¯çš„è®¿é—®ä»¤ç‰Œ (Access token)ã€‚ä½ å¯èƒ½éœ€è¦æŒ‡å®šè·å–è®¿é—®ä»¤ç‰Œ (Access token) æ‰€éœ€çš„æƒé™ (Scopes) æˆ–å‚æ•°ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„æä¾›å•†è¦æ±‚ `profile` æƒé™ (Scope) æ‰èƒ½è®¿é—®ç”¨æˆ·èº«ä»½ä¿¡æ¯ï¼Œå¯åœ¨ "Auth Params" å­—æ®µè¾“å…¥ï¼š

```json
{ "scope": "profile" }
```

</TabItem>
</Tabs>

### é…ç½® MCP Auth (Set up MCP auth) \{#set-up-mcp-auth}

åœ¨ä½ çš„ MCP æœåŠ¡å™¨é¡¹ç›®ä¸­ï¼Œéœ€è¦å®‰è£… MCP Auth SDK å¹¶é…ç½®å…¶ä½¿ç”¨ä½ çš„æˆæƒ (Authorization) æœåŠ¡å™¨å…ƒæ•°æ®ã€‚

<Tabs groupId="sdk">
<TabItem value="python" label="Python">

é¦–å…ˆï¼Œå®‰è£… `mcpauth` åŒ…ï¼š

```bash
pip install mcpauth
```

æˆ–ä½¿ç”¨ä½ å–œæ¬¢çš„å…¶ä»–åŒ…ç®¡ç†å™¨ï¼Œå¦‚ `uv` æˆ– `poetry`ã€‚

</TabItem>
<TabItem value="node" label="Node.js">

é¦–å…ˆï¼Œå®‰è£… `mcp-auth` åŒ…ï¼š

```bash
npm install mcp-auth
```

</TabItem>
</Tabs>

MCP Auth éœ€è¦æˆæƒ (Authorization) æœåŠ¡å™¨å…ƒæ•°æ®ä»¥å®Œæˆåˆå§‹åŒ–ã€‚æ ¹æ®ä½ çš„æä¾›å•†ï¼š

<Tabs groupId="provider">

<TabItem value="logto" label="Logto">

å‘è¡Œè€… (Issuer) URL å¯åœ¨ Logto Console çš„åº”ç”¨è¯¦æƒ…é¡µ "Endpoints & Credentials / Issuer endpoint" åŒºåŸŸæ‰¾åˆ°ï¼Œç±»ä¼¼ `https://my-project.logto.app/oidc`ã€‚

<SetupOidc />

</TabItem>

<TabItem value="keycloak" label="Keycloak">

å‘è¡Œè€… (Issuer) URL å¯åœ¨ Keycloak ç®¡ç†æ§åˆ¶å°æ‰¾åˆ°ã€‚åœ¨ä½ çš„ 'mcp-realm' ä¸‹ï¼Œè¿›å…¥ "Realm settings / Endpoints" åŒºåŸŸï¼Œç‚¹å‡» "OpenID Endpoint Configuration" é“¾æ¥ã€‚JSON æ–‡æ¡£ä¸­çš„ `issuer` å­—æ®µå³ä¸ºä½ çš„å‘è¡Œè€… (Issuer) URLï¼Œç±»ä¼¼ `http://localhost:8080/realms/mcp-realm`ã€‚

<SetupOidc />

</TabItem>

<TabItem value="oidc" label="OIDC">

ä»¥ä¸‹ä»£ç åŒæ ·å‡è®¾æˆæƒ (Authorization) æœåŠ¡å™¨æ”¯æŒ [userinfo ç«¯ç‚¹](https://openid.net/specs/openid-connect-core-1_0.html#UserInfo) ç”¨äºè·å–ç”¨æˆ·èº«ä»½ä¿¡æ¯ã€‚å¦‚æœä½ çš„æä¾›å•†ä¸æ”¯æŒè¯¥ç«¯ç‚¹ï¼Œè¯·æŸ¥é˜…æ–‡æ¡£è·å–å…·ä½“ç«¯ç‚¹ï¼Œå¹¶å°† userinfo ç«¯ç‚¹å˜é‡æ›¿æ¢ä¸ºæ­£ç¡®çš„ URLã€‚

<SetupOidc showAlternative />

</TabItem>
<TabItem value="oauth" label="OAuth 2">

å¦‚å‰æ‰€è¿°ï¼ŒOAuth 2.0 æ²¡æœ‰å®šä¹‰è·å–ç”¨æˆ·èº«ä»½ä¿¡æ¯çš„æ ‡å‡†æ–¹å¼ã€‚ä»¥ä¸‹ä»£ç å‡è®¾ä½ çš„æä¾›å•†æœ‰ä¸“é—¨çš„ç«¯ç‚¹ç”¨äºé€šè¿‡è®¿é—®ä»¤ç‰Œ (Access token) è·å–ç”¨æˆ·èº«ä»½ä¿¡æ¯ã€‚è¯·æŸ¥é˜…ä½ çš„æä¾›å•†æ–‡æ¡£è·å–å…·ä½“ç«¯ç‚¹ï¼Œå¹¶å°† userinfo ç«¯ç‚¹å˜é‡æ›¿æ¢ä¸ºæ­£ç¡®çš„ URLã€‚

<SetupOauth />

</TabItem>
</Tabs>

### æ›´æ–° MCP æœåŠ¡å™¨ (Update MCP server) \{#update-mcp-server}

æˆ‘ä»¬å¿«å®Œæˆäº†ï¼ç°åœ¨éœ€è¦æ›´æ–° MCP æœåŠ¡å™¨ï¼Œåº”ç”¨ MCP Auth è·¯ç”±å’Œä¸­é—´ä»¶å‡½æ•°ï¼Œå¹¶è®© `whoami` å·¥å…·è¿”å›å®é™…çš„ç”¨æˆ·èº«ä»½ä¿¡æ¯ã€‚

<Tabs groupId="sdk">
<TabItem value="python" label="Python">

```python
@mcp.tool()
def whoami() -> dict[str, Any]:
    """è¿”å›å½“å‰ç”¨æˆ·ä¿¡æ¯çš„å·¥å…·ã€‚"""
    return (
        mcp_auth.auth_info.claims
        if mcp_auth.auth_info # ç”± Bearer auth ä¸­é—´ä»¶å¡«å……
        else {"error": "Not authenticated"}
    )

# ...

bearer_auth = Middleware(mcp_auth.bearer_auth_middleware(verify_access_token))
app = Starlette(
    routes=[
        # æ·»åŠ å…ƒæ•°æ®è·¯ç”± (`/.well-known/oauth-authorization-server`)
        mcp_auth.metadata_route(),
        # ç”¨ Bearer auth ä¸­é—´ä»¶ä¿æŠ¤ MCP æœåŠ¡å™¨
        Mount('/', app=mcp.sse_app(), middleware=[bearer_auth]),
    ],
)
```

</TabItem>
<TabItem value="node" label="Node.js">

```js
server.tool('whoami', ({ authInfo }) => {
  return {
    content: [
      { type: 'text', text: JSON.stringify(authInfo?.claims ?? { error: 'Not authenticated' }) },
    ],
  };
});

// ...

app.use(mcpAuth.delegatedRouter());
app.use(mcpAuth.bearerAuth(verifyToken));
```

</TabItem>
</Tabs>

## æ£€æŸ¥ç‚¹ï¼šå¸¦è®¤è¯ (Authentication) è¿è¡Œ `whoami` å·¥å…· (Checkpoint: Run the `whoami` tool with authentication) \{#checkpoint-run-the-whoami-tool-with-authentication}

é‡å¯ä½ çš„ MCP æœåŠ¡å™¨ï¼Œå¹¶åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ MCP inspectorã€‚å½“ä½ ç‚¹å‡» "Connect" æŒ‰é’®æ—¶ï¼Œåº”ä¼šè¢«é‡å®šå‘åˆ°æˆæƒ (Authorization) æœåŠ¡å™¨çš„ç™»å½•é¡µé¢ã€‚

ç™»å½•åè¿”å› MCP inspectorï¼Œé‡å¤ä¸Šä¸€ä¸ªæ£€æŸ¥ç‚¹çš„æ“ä½œè¿è¡Œ `whoami` å·¥å…·ã€‚è¿™ä¸€æ¬¡ï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ°æˆæƒ (Authorization) æœåŠ¡å™¨è¿”å›çš„ç”¨æˆ·èº«ä»½ä¿¡æ¯ã€‚

![MCP inspector whoami å·¥å…·ç»“æœ](/docs-assets/images/tutorials/whoami/result.png)

<Tabs groupId="sdk">
<TabItem value="python" label="Python">

:::info
å®Œæ•´ MCP æœåŠ¡å™¨ï¼ˆOIDC ç‰ˆæœ¬ï¼‰ä»£ç è¯·å‚è€ƒ [MCP Auth Python SDK ä»“åº“](https://github.com/mcp-auth/python/blob/master/samples/server/whoami.py)ã€‚
:::

</TabItem>
<TabItem value="node" label="Node.js">

:::info
å®Œæ•´ MCP æœåŠ¡å™¨ï¼ˆOIDC ç‰ˆæœ¬ï¼‰ä»£ç è¯·å‚è€ƒ [MCP Auth Node.js SDK ä»“åº“](https://github.com/mcp-auth/js/blob/master/packages/sample-servers/src)ã€‚è¯¥ç›®å½•åŒ…å« TypeScript å’Œ JavaScript ç‰ˆæœ¬ã€‚
:::

</TabItem>
</Tabs>

## ç»“è¯­ (Closing notes) \{#closing-notes}

ğŸŠ æ­å–œä½ ï¼ä½ å·²æˆåŠŸå®Œæˆæœ¬æ•™ç¨‹ã€‚è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹æ‰€åšçš„å†…å®¹ï¼š

- æ­å»ºäº†å¸¦æœ‰ `whoami` å·¥å…·çš„åŸºç¡€ MCP æœåŠ¡å™¨
- ä½¿ç”¨ MCP Auth å°† MCP æœåŠ¡å™¨ä¸æˆæƒ (Authorization) æœåŠ¡å™¨é›†æˆ
- é…ç½® MCP Inspector ä»¥è®¤è¯ (Authentication) ç”¨æˆ·å¹¶è·å–å…¶èº«ä»½ä¿¡æ¯

ä½ è¿˜å¯ä»¥æ¢ç´¢ä¸€äº›è¿›é˜¶ä¸»é¢˜ï¼ŒåŒ…æ‹¬ï¼š

- ä½¿ç”¨ [JWT (JSON Web Token)](https://auth.wiki/jwt) è¿›è¡Œè®¤è¯ (Authentication) å’Œæˆæƒ (Authorization)
- åˆ©ç”¨ [èµ„æºæŒ‡ç¤ºå™¨ (resource indicators, RFC 8707)](https://auth-wiki.logto.io/resource-indicator) æŒ‡å®šè¢«è®¿é—®çš„èµ„æº
- å®ç°è‡ªå®šä¹‰è®¿é—®æ§åˆ¶æœºåˆ¶ï¼Œå¦‚ [åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ (RBAC)](https://auth.wiki/rbac) æˆ– [åŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶ (ABAC)](https://auth.wiki/abac)

æ¬¢è¿æŸ¥é˜…æ›´å¤šæ•™ç¨‹å’Œæ–‡æ¡£ï¼Œå……åˆ†å‘æŒ¥ MCP Auth çš„èƒ½åŠ›ã€‚