---
sidebar_position: 1
sidebar_label: 'æ•™å­¸ï¼šæˆ‘æ˜¯èª°ï¼Ÿ'
---

import TabItem from '@theme/TabItem';
import Tabs from '@theme/Tabs';

import SetupOauth from './_setup-oauth.mdx';
import SetupOidc from './_setup-oidc.mdx';

# æ•™å­¸ï¼šæˆ‘æ˜¯èª°ï¼Ÿ (Tutorial: Who am I?)

æœ¬æ•™å­¸å°‡å¼•å°ä½ è¨­å®š MCP Authï¼Œä»¥é©—è­‰ (Authentication) ä½¿ç”¨è€…ä¸¦å¾æˆæ¬Š (Authorization) ä¼ºæœå™¨å–å¾—å…¶èº«åˆ†è³‡è¨Šã€‚

å®Œæˆæœ¬æ•™å­¸å¾Œï¼Œä½ å°‡æœƒï¼š

- âœ… åŸºæœ¬ç­è§£å¦‚ä½•ä½¿ç”¨ MCP Auth é€²è¡Œä½¿ç”¨è€…é©—è­‰ (Authentication)ã€‚
- âœ… æ“æœ‰ä¸€å€‹ MCP ä¼ºæœå™¨ï¼Œä¸¦èƒ½æä¾›å·¥å…·ä¾†å–å¾—ä½¿ç”¨è€…èº«åˆ†è³‡è¨Šã€‚

## æ¦‚è¦½ (Overview) \{#overview}

æœ¬æ•™å­¸å°‡æ¶‰åŠä»¥ä¸‹å…ƒä»¶ï¼š

- **MCP ä¼ºæœå™¨**ï¼šä¸€å€‹ç°¡å–®çš„ MCP ä¼ºæœå™¨ï¼Œä½¿ç”¨ MCP å®˜æ–¹ SDK è™•ç†è«‹æ±‚ã€‚
- **MCP inspector**ï¼šMCP ä¼ºæœå™¨çš„è¦–è¦ºåŒ–æ¸¬è©¦å·¥å…·ï¼ŒåŒæ™‚ä½œç‚º OAuth / OIDC ç”¨æˆ¶ç«¯ï¼Œå•Ÿå‹•æˆæ¬Šæµç¨‹ä¸¦å–å¾—å­˜å–æ¬Šæ– (Access token)ã€‚
- **æˆæ¬Šä¼ºæœå™¨ (Authorization server)**ï¼šä¸€å€‹ OAuth 2.1 æˆ– OpenID Connect æä¾›è€…ï¼Œè² è²¬ç®¡ç†ä½¿ç”¨è€…èº«åˆ†ä¸¦ç°½ç™¼å­˜å–æ¬Šæ– (Access token)ã€‚

ä»¥ä¸‹æ˜¯é€™äº›å…ƒä»¶é–“äº’å‹•çš„é«˜éšåœ–ç¤ºï¼š

```mermaid
sequenceDiagram
    participant Client as MCP Inspector
    participant Server as MCP Server
    participant Auth as æˆæ¬Šä¼ºæœå™¨ (Authorization Server)

    Client->>Server: è«‹æ±‚å·¥å…· `whoami`
    Server->>Client: å›å‚³ 401 æœªæˆæ¬Š (Unauthorized)
    Client->>Auth: å•Ÿå‹•æˆæ¬Šæµç¨‹
    Auth->>Auth: å®Œæˆæˆæ¬Šæµç¨‹
    Auth->>Client: å¸¶æˆæ¬Šç¢¼é‡å°å›ä¾†
    Client->>Auth: ç”¨æˆæ¬Šç¢¼æ›å–å­˜å–æ¬Šæ– (Access token)
    Auth->>Client: å›å‚³å­˜å–æ¬Šæ– (Access token)
    Client->>Server: ä»¥å­˜å–æ¬Šæ– (Access token) è«‹æ±‚ `whoami`
    Server->>Auth: ä»¥å­˜å–æ¬Šæ– (Access token) å–å¾—ä½¿ç”¨è€…èº«åˆ†
    Auth->>Server: å›å‚³ä½¿ç”¨è€…èº«åˆ†
    Server->>Client: å›å‚³ä½¿ç”¨è€…èº«åˆ†
```

## ç­è§£ä½ çš„æˆæ¬Šä¼ºæœå™¨ (Understand your authorization server) \{#understand-your-authorization-server}

### å–å¾—ä½¿ç”¨è€…èº«åˆ†è³‡è¨Š (Retrieving user identity information) \{#retrieving-user-identity-information}

ç‚ºå®Œæˆæœ¬æ•™å­¸ï¼Œä½ çš„æˆæ¬Šä¼ºæœå™¨æ‡‰æä¾› API ä»¥å–å¾—ä½¿ç”¨è€…èº«åˆ†è³‡è¨Šï¼š

<Tabs groupId="provider">
<TabItem value="logto" label="Logto">

[Logto](https://logto.io) æ˜¯ä¸€å€‹ OpenID Connect æä¾›è€…ï¼Œæ”¯æ´æ¨™æº–çš„ [userinfo endpoint](https://openid.net/specs/openid-connect-core-1_0.html#UserInfo) ä¾†å–å¾—ä½¿ç”¨è€…èº«åˆ†è³‡è¨Šã€‚

è¦å–å¾—å¯ç”¨æ–¼ userinfo endpoint çš„å­˜å–æ¬Šæ– (Access token)ï¼Œè‡³å°‘éœ€å…©å€‹æ¬Šé™ç¯„åœ (Scopes)ï¼š`openid` èˆ‡ `profile`ã€‚ä½ å¯ä»¥ç¹¼çºŒé–±è®€ï¼Œç¨å¾Œæœƒä»‹ç´¹æ¬Šé™ç¯„åœè¨­å®šã€‚

</TabItem>
<TabItem value="keycloak" label="Keycloak">

[Keycloak](https://www.keycloak.org) æ˜¯ä¸€å€‹é–‹æºèº«åˆ†èˆ‡å­˜å–ç®¡ç†è§£æ±ºæ–¹æ¡ˆï¼Œæ”¯æ´å¤šç¨®å”è­°ï¼ŒåŒ…æ‹¬ OpenID Connect (OIDC)ã€‚ä½œç‚º OIDC æä¾›è€…ï¼Œå®ƒå¯¦ä½œäº†æ¨™æº–çš„ [userinfo endpoint](https://openid.net/specs/openid-connect-core-1_0.html#UserInfo) ä»¥å–å¾—ä½¿ç”¨è€…èº«åˆ†è³‡è¨Šã€‚

è¦å–å¾—å¯ç”¨æ–¼ userinfo endpoint çš„å­˜å–æ¬Šæ– (Access token)ï¼Œè‡³å°‘éœ€å…©å€‹æ¬Šé™ç¯„åœ (Scopes)ï¼š`openid` èˆ‡ `profile`ã€‚ä½ å¯ä»¥ç¹¼çºŒé–±è®€ï¼Œç¨å¾Œæœƒä»‹ç´¹æ¬Šé™ç¯„åœè¨­å®šã€‚

</TabItem>
<TabItem value="oidc" label="OIDC">

å¤§å¤šæ•¸ OpenID Connect æä¾›è€…éƒ½æ”¯æ´ [userinfo endpoint](https://openid.net/specs/openid-connect-core-1_0.html#UserInfo) ä»¥å–å¾—ä½¿ç”¨è€…èº«åˆ†è³‡è¨Šã€‚

è«‹æŸ¥é–±ä½ çš„æä¾›è€…æ–‡ä»¶ï¼Œç¢ºèªæ˜¯å¦æ”¯æ´æ­¤ endpointã€‚å¦‚æœä½ çš„æä¾›è€…æ”¯æ´ [OpenID Connect Discovery](https://openid.net/specs/openid-connect-discovery-1_0.html)ï¼Œä¹Ÿå¯æª¢æŸ¥ discovery æ–‡ä»¶ï¼ˆ`.well-known/openid-configuration` å›æ‡‰ï¼‰ä¸­æ˜¯å¦åŒ…å« `userinfo_endpoint`ã€‚

è¦å–å¾—å¯ç”¨æ–¼ userinfo endpoint çš„å­˜å–æ¬Šæ– (Access token)ï¼Œè‡³å°‘éœ€å…©å€‹æ¬Šé™ç¯„åœ (Scopes)ï¼š`openid` èˆ‡ `profile`ã€‚è«‹æŸ¥é–±ä½ çš„æä¾›è€…æ–‡ä»¶ï¼Œç­è§£æ¬Šé™ç¯„åœèˆ‡ä½¿ç”¨è€…èº«åˆ†å®£å‘Š (Claims) çš„å°æ‡‰é—œä¿‚ã€‚

</TabItem>
<TabItem value="oauth" label="OAuth 2">

é›–ç„¶ OAuth 2.0 æ²’æœ‰å®šç¾©æ¨™æº–æ–¹å¼ä¾†å–å¾—ä½¿ç”¨è€…èº«åˆ†è³‡è¨Šï¼Œè¨±å¤šæä¾›è€…æœƒå¯¦ä½œè‡ªæœ‰ endpointã€‚è«‹æŸ¥é–±ä½ çš„æä¾›è€…æ–‡ä»¶ï¼Œç­è§£å¦‚ä½•ä½¿ç”¨å­˜å–æ¬Šæ– (Access token) å–å¾—ä½¿ç”¨è€…èº«åˆ†è³‡è¨Šï¼Œä»¥åŠåœ¨å•Ÿå‹•æˆæ¬Šæµç¨‹æ™‚éœ€å¸¶å“ªäº›åƒæ•¸ä¾†å–å¾—è©²å­˜å–æ¬Šæ–ã€‚

</TabItem>
</Tabs>

### å‹•æ…‹ç”¨æˆ¶ç«¯è¨»å†Š (Dynamic Client Registration) \{#dynamic-client-registration}

æœ¬æ•™å­¸ä¸å¼·åˆ¶éœ€è¦å‹•æ…‹ç”¨æˆ¶ç«¯è¨»å†Šï¼Œä½†å¦‚æœä½ æƒ³è‡ªå‹•åŒ– MCP ç”¨æˆ¶ç«¯åœ¨æˆæ¬Šä¼ºæœå™¨çš„è¨»å†Šæµç¨‹ï¼Œé€™æœƒå¾ˆæœ‰å¹«åŠ©ã€‚è©³æƒ…è«‹åƒé–± [æ˜¯å¦éœ€è¦å‹•æ…‹ç”¨æˆ¶ç«¯è¨»å†Šï¼Ÿ](../../provider-list#is-dcr-required)ã€‚

## è¨­å®š MCP ä¼ºæœå™¨ (Set up the MCP server) \{#set-up-the-mcp-server}

æˆ‘å€‘å°‡ä½¿ç”¨ [MCP å®˜æ–¹ SDK](https://github.com/modelcontextprotocol) å»ºç«‹ä¸€å€‹ MCP ä¼ºæœå™¨ï¼Œä¸¦å¯¦ä½œä¸€å€‹ `whoami` å·¥å…·ï¼Œå¾æˆæ¬Šä¼ºæœå™¨å–å¾—ä½¿ç”¨è€…èº«åˆ†è³‡è¨Šã€‚

### å»ºç«‹æ–°å°ˆæ¡ˆ (Create a new project) \{#create-a-new-project}

<Tabs groupId="sdk">
<TabItem value="python" label="Python">

```bash
mkdir mcp-server
cd mcp-server
uv init # æˆ–ä½¿ç”¨ `pipenv` æˆ– `poetry` å»ºç«‹æ–°è™›æ“¬ç’°å¢ƒ
```

</TabItem>
<TabItem value="node" label="Node.js">

å»ºç«‹æ–°çš„ Node.js å°ˆæ¡ˆï¼š

```bash
mkdir mcp-server
cd mcp-server
npm init -y # æˆ–ä½¿ç”¨ `pnpm init`
npm pkg set type="module"
npm pkg set main="whoami.js"
npm pkg set scripts.start="node whoami.js"
```

</TabItem>
</Tabs>

### å®‰è£ MCP SDK èˆ‡ç›¸ä¾å¥—ä»¶ (Install the MCP SDK and dependencies) \{#install-the-mcp-sdk-and-dependencies}

<Tabs groupId="sdk">
<TabItem value="python" label="Python">

```bash
pip install "mcp[cli]" starlette uvicorn
```

æˆ–ä½¿ç”¨ä½ åå¥½çš„å¥—ä»¶ç®¡ç†å·¥å…·ï¼Œå¦‚ `uv` æˆ– `poetry`ã€‚

</TabItem>
<TabItem value="node" label="Node.js">

```bash
npm install @modelcontextprotocol/sdk express
```

æˆ–ä½¿ç”¨ä½ åå¥½çš„å¥—ä»¶ç®¡ç†å·¥å…·ï¼Œå¦‚ `pnpm` æˆ– `yarn`ã€‚

</TabItem>
</Tabs>

### å»ºç«‹ MCP ä¼ºæœå™¨ (Create the MCP server) \{#create-the-mcp-server}

é¦–å…ˆï¼Œè®“æˆ‘å€‘å»ºç«‹ä¸€å€‹å¯¦ä½œ `whoami` å·¥å…·çš„ MCP ä¼ºæœå™¨ã€‚

<Tabs groupId="sdk">
<TabItem value="python" label="Python">

å»ºç«‹åç‚º `whoami.py` çš„æª”æ¡ˆï¼Œä¸¦åŠ å…¥ä»¥ä¸‹ç¨‹å¼ç¢¼ï¼š

```python
from mcp.server.fastmcp import FastMCP
from starlette.applications import Starlette
from starlette.routing import Mount
from typing import Any

mcp = FastMCP("WhoAmI")

@mcp.tool()
def whoami() -> dict[str, Any]:
    """å›å‚³ç›®å‰ä½¿ç”¨è€…è³‡è¨Šçš„å·¥å…·ã€‚"""
    return {"error": "Not authenticated"}

app = Starlette(
    routes=[Mount('/', app=mcp.sse_app())]
)
```

ä»¥ä»¥ä¸‹æŒ‡ä»¤å•Ÿå‹•ä¼ºæœå™¨ï¼š

```bash
uvicorn whoami:app --host 0.0.0.0 --port 3001
```

</TabItem>
<TabItem value="node" label="Node.js">

:::note
ç”±æ–¼ç›®å‰ MCP inspector å°šæœªæ”¯æ´æˆæ¬Šæµç¨‹ï¼Œæˆ‘å€‘å°‡æ¡ç”¨ SSE æ–¹å¼è¨­å®š MCP ä¼ºæœå™¨ã€‚å¾… MCP inspector æ”¯æ´æˆæ¬Šæµç¨‹å¾Œï¼Œæœƒæ›´æ–°æ­¤è™•ç¨‹å¼ç¢¼ã€‚
:::

ä½ ä¹Ÿå¯ä»¥é¸æ“‡ä½¿ç”¨ `pnpm` æˆ– `yarn`ã€‚

å»ºç«‹åç‚º `whoami.js` çš„æª”æ¡ˆï¼Œä¸¦åŠ å…¥ä»¥ä¸‹ç¨‹å¼ç¢¼ï¼š

```js
import { McpServer } from '@modelcontextprotocol/sdk/server/mcp.js';
import { SSEServerTransport } from '@modelcontextprotocol/sdk/server/sse.js';
import express from 'express';

// å»ºç«‹ MCP ä¼ºæœå™¨
const server = new McpServer({
  name: 'WhoAmI',
  version: '0.0.0',
});

// æ–°å¢ä¸€å€‹å›å‚³ç›®å‰ä½¿ç”¨è€…è³‡è¨Šçš„å·¥å…·
server.tool('whoami', async () => {
  return {
    content: [{ type: 'text', text: JSON.stringify({ error: 'Not authenticated' }) }],
  };
});

// ä»¥ä¸‹ç‚º MCP SDK æ–‡ä»¶çš„æ¨£æ¿ç¨‹å¼ç¢¼
const PORT = 3001;
const app = express();

const transports = {};

app.get('/sse', async (_req, res) => {
  const transport = new SSEServerTransport('/messages', res);
  transports[transport.sessionId] = transport;

  res.on('close', () => {
    delete transports[transport.sessionId];
  });

  await server.connect(transport);
});

app.post('/messages', async (req, res) => {
  const sessionId = String(req.query.sessionId);
  const transport = transports[sessionId];
  if (transport) {
    await transport.handlePostMessage(req, res, req.body);
  } else {
    res.status(400).send('No transport found for sessionId');
  }
});

app.listen(PORT);
```

ä»¥ä»¥ä¸‹æŒ‡ä»¤å•Ÿå‹•ä¼ºæœå™¨ï¼š

```bash
npm start
```

</TabItem>
</Tabs>

## æª¢æŸ¥ MCP ä¼ºæœå™¨ (Inspect the MCP server) \{#inspect-the-mcp-server}

### ä¸‹è¼‰ä¸¦åŸ·è¡Œ MCP inspector (Clone and run MCP inspector) \{#clone-and-run-mcp-inspector}

ç¾åœ¨ MCP ä¼ºæœå™¨å·²å•Ÿå‹•ï¼Œæˆ‘å€‘å¯ä»¥ä½¿ç”¨ MCP inspector æª¢æŸ¥ `whoami` å·¥å…·æ˜¯å¦å¯ç”¨ã€‚

ç”±æ–¼ç›®å‰å¯¦ä½œä¸Šçš„é™åˆ¶ï¼Œæˆ‘å€‘ fork äº† [MCP inspector](https://github.com/mcp-auth/inspector)ï¼Œè®“å…¶åœ¨é©—è­‰ (Authentication) èˆ‡æˆæ¬Š (Authorization) ä¸Šæ›´éˆæ´»ä¸”å¯æ“´å±•ã€‚æˆ‘å€‘ä¹Ÿå·²å‘åŸå§‹å€‰åº«æäº¤ pull requestã€‚

åŸ·è¡Œ MCP inspectorï¼Œè«‹ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ï¼ˆéœ€å®‰è£ Node.jsï¼‰ï¼š

```bash
git clone https://github.com/mcp-auth/inspector.git
cd inspector
npm install
npm run dev
```

ç„¶å¾Œåœ¨ç€è¦½å™¨é–‹å•Ÿ `http://localhost:6274/`ï¼ˆæˆ–çµ‚ç«¯æ©Ÿé¡¯ç¤ºçš„å…¶ä»–ç¶²å€ï¼‰ä»¥é€²å…¥ MCP inspectorã€‚

### é€£æ¥ MCP inspector èˆ‡ MCP ä¼ºæœå™¨ (Connect MCP inspector to the MCP server) \{#connect-mcp-inspector-to-the-mcp-server}

åœ¨ç¹¼çºŒä¹‹å‰ï¼Œè«‹æª¢æŸ¥ MCP inspector çš„ä»¥ä¸‹è¨­å®šï¼š

- **Transport Type**ï¼šè¨­ç‚º `SSE`ã€‚
- **URL**ï¼šè¨­ç‚ºä½ çš„ MCP ä¼ºæœå™¨ç¶²å€ï¼Œæœ¬ä¾‹æ‡‰ç‚º `http://localhost:3001/sse`ã€‚

ç¾åœ¨ä½ å¯ä»¥é»æ“Šã€ŒConnectã€æŒ‰éˆ•ï¼Œæª¢æŸ¥ MCP inspector æ˜¯å¦èƒ½é€£æ¥ MCP ä¼ºæœå™¨ã€‚å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œæ‡‰æœƒçœ‹åˆ° MCP inspector é¡¯ç¤ºã€ŒConnectedã€ç‹€æ…‹ã€‚

### æª¢æŸ¥é»ï¼šåŸ·è¡Œ `whoami` å·¥å…· (Checkpoint: Run the `whoami` tool) \{#checkpoint-run-the-whoami-tool}

1. åœ¨ MCP inspector ä¸Šæ–¹é¸å–®é»é¸ã€ŒToolsã€åˆ†é ã€‚
2. é»æ“Šã€ŒList Toolsã€æŒ‰éˆ•ã€‚
3. ä½ æ‡‰è©²æœƒåœ¨é é¢ä¸Šçœ‹åˆ° `whoami` å·¥å…·ï¼Œé»æ“Šå®ƒä»¥é–‹å•Ÿå·¥å…·è©³æƒ…ã€‚
4. å³å´æœƒå‡ºç¾ã€ŒRun Toolã€æŒ‰éˆ•ï¼Œé»æ“ŠåŸ·è¡Œå·¥å…·ã€‚
5. ä½ æ‡‰è©²æœƒçœ‹åˆ°å·¥å…·å›å‚³çµæœç‚º JSONï¼š`{"error": "Not authenticated"}`ã€‚

![MCP inspector é¦–æ¬¡åŸ·è¡Œç•«é¢](/docs-assets/images/tutorials/whoami/inspector-first-run.png)

## èˆ‡æˆæ¬Šä¼ºæœå™¨æ•´åˆ (Integrate with your authorization server) \{#integrate-with-your-authorization-server}

å®Œæˆæœ¬ç¯€éœ€è€ƒæ…®ä»¥ä¸‹å¹¾é»ï¼š

<details>
<summary>**ä½ çš„æˆæ¬Šä¼ºæœå™¨ç°½ç™¼è€… (Issuer) URL**</summary>

é€šå¸¸æ˜¯ä½ çš„æˆæ¬Šä¼ºæœå™¨åŸºç¤ç¶²å€ï¼Œä¾‹å¦‚ `https://auth.example.com`ã€‚æœ‰äº›æä¾›è€…å¯èƒ½æœƒæœ‰è·¯å¾‘ï¼Œå¦‚ `https://example.logto.app/oidc`ï¼Œè«‹åƒé–±ä½ çš„æä¾›è€…æ–‡ä»¶ã€‚

</details>

<details>
<summary>**å¦‚ä½•å–å¾—æˆæ¬Šä¼ºæœå™¨ä¸­ç¹¼è³‡æ–™ (Metadata)**</summary>

- è‹¥ä½ çš„æˆæ¬Šä¼ºæœå™¨ç¬¦åˆ [OAuth 2.0 æˆæ¬Šä¼ºæœå™¨ä¸­ç¹¼è³‡æ–™ (RFC 8414)](https://datatracker.ietf.org/doc/html/rfc8414) æˆ– [OpenID Connect Discovery](https://openid.net/specs/openid-connect-discovery-1_0.html)ï¼Œå¯ç›´æ¥ç”¨ MCP Auth å…§å»ºå·¥å…·è‡ªå‹•å–å¾—ä¸­ç¹¼è³‡æ–™ã€‚
- è‹¥ä¸ç¬¦åˆä¸Šè¿°æ¨™æº–ï¼Œéœ€æ‰‹å‹•åœ¨ MCP ä¼ºæœå™¨è¨­å®šä¸­æŒ‡å®šä¸­ç¹¼è³‡æ–™ç¶²å€æˆ– endpointï¼Œè«‹æŸ¥é–±ä½ çš„æä¾›è€…æ–‡ä»¶ã€‚

</details>

<details>
<summary>**å¦‚ä½•å°‡ MCP inspector è¨»å†Šç‚ºæˆæ¬Šä¼ºæœå™¨ç”¨æˆ¶ç«¯**</summary>

- è‹¥ä½ çš„æˆæ¬Šä¼ºæœå™¨æ”¯æ´ [å‹•æ…‹ç”¨æˆ¶ç«¯è¨»å†Š (Dynamic Client Registration)](https://datatracker.ietf.org/doc/html/rfc7591)ï¼Œå¯ç•¥éæ­¤æ­¥é©Ÿï¼ŒMCP inspector æœƒè‡ªå‹•è¨»å†Šã€‚
- è‹¥ä¸æ”¯æ´ï¼Œéœ€æ‰‹å‹•å°‡ MCP inspector è¨»å†Šç‚ºç”¨æˆ¶ç«¯ã€‚

</details>

<details>
<summary>**å¦‚ä½•å–å¾—ä½¿ç”¨è€…èº«åˆ†è³‡è¨Šï¼Œä»¥åŠå¦‚ä½•è¨­å®šæˆæ¬Šè«‹æ±‚åƒæ•¸**</summary>

- å°æ–¼ OpenID Connect æä¾›è€…ï¼šé€šå¸¸éœ€åœ¨æˆæ¬Šæµç¨‹è«‹æ±‚è‡³å°‘ `openid` èˆ‡ `profile` æ¬Šé™ç¯„åœ (Scopes)ã€‚é€™å¯ç¢ºä¿æˆæ¬Šä¼ºæœå™¨å›å‚³çš„å­˜å–æ¬Šæ– (Access token) å…·å‚™å­˜å– [userinfo endpoint](https://openid.net/specs/openid-connect-core-1_0.html#UserInfo) æ‰€éœ€æ¬Šé™ã€‚

  æ³¨æ„ï¼šéƒ¨åˆ†æä¾›è€…å¯èƒ½ä¸æ”¯æ´ userinfo endpointã€‚

- å°æ–¼ OAuth 2.0 / OAuth 2.1 æä¾›è€…ï¼šè«‹æŸ¥é–±ä½ çš„æä¾›è€…æ–‡ä»¶ï¼Œç­è§£å¦‚ä½•ç”¨å­˜å–æ¬Šæ– (Access token) å–å¾—ä½¿ç”¨è€…èº«åˆ†è³‡è¨Šï¼Œä»¥åŠå•Ÿå‹•æˆæ¬Šæµç¨‹æ™‚éœ€å¸¶å“ªäº›åƒæ•¸ã€‚

</details>

é›–ç„¶æ¯å€‹æä¾›è€…å¯èƒ½æœ‰ä¸åŒéœ€æ±‚ï¼Œä»¥ä¸‹æ­¥é©Ÿå°‡å¼•å°ä½ æ•´åˆ MCP inspector èˆ‡ MCP ä¼ºæœå™¨ï¼Œä¸¦é€²è¡Œæä¾›è€…å°ˆå±¬è¨­å®šã€‚

### è¨»å†Š MCP inspector ç‚ºç”¨æˆ¶ç«¯ (Register MCP inspector as a client) \{#register-mcp-inspector-as-a-client}

<Tabs groupId="provider">
<TabItem value="logto" label="Logto">

èˆ‡ [Logto](https://logto.io) æ•´åˆéå¸¸ç°¡å–®ï¼Œå› ç‚ºå®ƒæ˜¯æ”¯æ´æ¨™æº– [userinfo endpoint](https://openid.net/specs/openid-connect-core-1_0.html#UserInfo) çš„ OpenID Connect æä¾›è€…ã€‚

ç”±æ–¼ Logto å°šæœªæ”¯æ´å‹•æ…‹ç”¨æˆ¶ç«¯è¨»å†Šï¼Œä½ éœ€æ‰‹å‹•å°‡ MCP inspector è¨»å†Šç‚º Logto ç§Ÿæˆ¶çš„ç”¨æˆ¶ç«¯ï¼š

1. é–‹å•Ÿ MCP inspectorï¼Œé»æ“Šã€ŒOAuth Configurationã€æŒ‰éˆ•ã€‚è¤‡è£½ **Redirect URL (auto-populated)**ï¼Œä¾‹å¦‚ `http://localhost:6274/oauth/callback`ã€‚
2. ç™»å…¥ [Logto Console](https://cloud.logto.io)ï¼ˆæˆ–ä½ çš„è‡ªæ¶ Logto Consoleï¼‰ã€‚
3. é€²å…¥ã€Œæ‡‰ç”¨ç¨‹å¼ã€åˆ†é ï¼Œé»æ“Šã€Œå»ºç«‹æ‡‰ç”¨ç¨‹å¼ã€ã€‚é é¢åº•éƒ¨é»ã€Œä¸ä½¿ç”¨æ¡†æ¶å»ºç«‹æ‡‰ç”¨ç¨‹å¼ã€ã€‚
4. å¡«å¯«æ‡‰ç”¨ç¨‹å¼è³‡è¨Šï¼Œç„¶å¾Œé»æ“Šã€Œå»ºç«‹æ‡‰ç”¨ç¨‹å¼ã€ï¼š
   - **é¸æ“‡æ‡‰ç”¨ç¨‹å¼é¡å‹**ï¼šé¸ã€Œå–®é æ‡‰ç”¨ç¨‹å¼ã€ã€‚
   - **æ‡‰ç”¨ç¨‹å¼åç¨±**ï¼šå¦‚ã€ŒMCP Inspectorã€ã€‚
5. åœ¨ã€Œè¨­å®š / Redirect URIsã€å€å¡Šï¼Œè²¼ä¸Šå‰›æ‰è¤‡è£½çš„ **Redirect URL (auto-populated)**ï¼Œç„¶å¾Œé»æ“Šåº•éƒ¨ã€Œå„²å­˜è®Šæ›´ã€ã€‚
6. é é¢ä¸Šæ–¹æœƒçœ‹åˆ°ã€ŒApp IDã€ï¼Œè«‹è¤‡è£½ã€‚
7. å›åˆ° MCP inspectorï¼Œå°‡ã€ŒApp IDã€è²¼åˆ°ã€ŒOAuth Configurationã€çš„ã€ŒClient IDã€æ¬„ä½ã€‚
8. åœ¨ã€ŒAuth Paramsã€æ¬„ä½è¼¸å…¥ `{"scope": "openid profile email"}`ï¼Œç¢ºä¿ Logto å›å‚³çš„å­˜å–æ¬Šæ– (Access token) å…·å‚™å­˜å– userinfo endpoint æ‰€éœ€æ¬Šé™ã€‚

</TabItem>
<TabItem value="keycloak" label="Keycloak">

[Keycloak](https://www.keycloak.org) æ˜¯ä¸€å€‹é–‹æºèº«åˆ†èˆ‡å­˜å–ç®¡ç†è§£æ±ºæ–¹æ¡ˆï¼Œæ”¯æ´ OpenID Connect å”è­°ã€‚

é›–ç„¶ Keycloak æ”¯æ´å‹•æ…‹ç”¨æˆ¶ç«¯è¨»å†Šï¼Œä½†å…¶è¨»å†Š endpoint ä¸æ”¯æ´ CORSï¼Œå°è‡´å¤§å¤šæ•¸ MCP ç”¨æˆ¶ç«¯ç„¡æ³•ç›´æ¥è¨»å†Šã€‚å› æ­¤éœ€æ‰‹å‹•è¨»å†Šã€‚

:::note
Keycloak å¯ç”¨å¤šç¨®æ–¹å¼å®‰è£ï¼ˆ[å®˜æ–¹èªªæ˜](https://www.keycloak.org/guides#getting-started)ï¼‰ï¼Œæœ¬æ•™å­¸ä»¥ Docker å¿«é€Ÿå®‰è£ç‚ºä¾‹ã€‚
:::

è¨­å®š Keycloak ä¸¦é€²è¡Œç›¸é—œé…ç½®ï¼š

1. ä¾ [å®˜æ–¹æ–‡ä»¶](https://www.keycloak.org/getting-started/getting-started-docker) ç”¨ Docker å•Ÿå‹• Keycloakï¼š

```bash
docker run -p 8080:8080 -e KC_BOOTSTRAP_ADMIN_USERNAME=admin -e KC_BOOTSTRAP_ADMIN_PASSWORD=admin quay.io/keycloak/keycloak:26.2.4 start-dev
```

2. é€²å…¥ Keycloak ç®¡ç†å¾Œå° (http://localhost:8080/admin)ï¼Œä»¥ä»¥ä¸‹å¸³å¯†ç™»å…¥ï¼š

   - ä½¿ç”¨è€…åç¨±ï¼š`admin`
   - å¯†ç¢¼ï¼š`admin`

3. å»ºç«‹æ–° Realmï¼š

   - å·¦ä¸Šè§’é»ã€ŒCreate Realmã€
   - ã€ŒRealm nameã€å¡«å…¥ `mcp-realm`
   - é»ã€ŒCreateã€

4. å»ºç«‹æ¸¬è©¦ä½¿ç”¨è€…ï¼š

   - å·¦å´é¸å–®é»ã€ŒUsersã€
   - é»ã€ŒCreate new userã€
   - å¡«å¯«ä½¿ç”¨è€…è³‡è¨Šï¼š
     - Usernameï¼š`testuser`
     - åå­—èˆ‡å§“æ°å¯ä»»æ„å¡«
   - é»ã€ŒCreateã€
   - åœ¨ã€ŒCredentialsã€åˆ†é è¨­å®šå¯†ç¢¼ä¸¦å–æ¶ˆã€ŒTemporaryã€

5. è¨»å†Š MCP Inspector ç‚ºç”¨æˆ¶ç«¯ï¼š

   - é–‹å•Ÿ MCP inspectorï¼Œé»æ“Šã€ŒOAuth Configurationã€æŒ‰éˆ•ã€‚è¤‡è£½ **Redirect URL (auto-populated)**ï¼Œå¦‚ `http://localhost:6274/oauth/callback`ã€‚
   - åœ¨ Keycloak ç®¡ç†å¾Œå°ï¼Œå·¦å´é¸å–®é»ã€ŒClientsã€
   - é»ã€ŒCreate clientã€
   - å¡«å¯«ç”¨æˆ¶ç«¯è³‡è¨Šï¼š
     - Client typeï¼šé¸ã€ŒOpenID Connectã€
     - Client IDï¼šå¡« `mcp-inspector`
     - é»ã€ŒNextã€
   - ã€ŒCapability configã€é é¢ï¼š
     - ç¢ºèªã€ŒStandard flowã€å·²å•Ÿç”¨
     - é»ã€ŒNextã€
   - ã€ŒLogin settingsã€é é¢ï¼š
     - è²¼ä¸Š MCP Inspector callback URL è‡³ã€ŒValid redirect URIsã€
     - ã€ŒWeb originsã€å¡«å…¥ `http://localhost:6274`
     - é»ã€ŒSaveã€
   - è¤‡è£½ã€ŒClient IDã€ï¼ˆå³ `mcp-inspector`ï¼‰

6. å›åˆ° MCP Inspectorï¼š
   - å°‡è¤‡è£½çš„ Client ID è²¼åˆ°ã€ŒOAuth Configurationã€çš„ã€ŒClient IDã€æ¬„ä½
   - ã€ŒAuth Paramsã€æ¬„ä½è¼¸å…¥ä»¥ä¸‹å…§å®¹ä»¥è«‹æ±‚å¿…è¦æ¬Šé™ç¯„åœï¼š

```json
{ "scope": "openid profile email" }
```

</TabItem>
<TabItem value="oidc" label="OIDC">

:::note
é€™æ˜¯é€šç”¨ OpenID Connect æä¾›è€…æ•´åˆæŒ‡å¼•ï¼Œè«‹æŸ¥é–±ä½ çš„æä¾›è€…æ–‡ä»¶ä»¥ç²å¾—ç´°ç¯€ã€‚
:::

è‹¥ä½ çš„ OpenID Connect æä¾›è€…æ”¯æ´å‹•æ…‹ç”¨æˆ¶ç«¯è¨»å†Šï¼Œå¯ç›´æ¥è·³è‡³ç¬¬ 8 æ­¥è¨­å®š MCP inspectorï¼›å¦å‰‡éœ€æ‰‹å‹•è¨»å†Šï¼š

1. é–‹å•Ÿ MCP inspectorï¼Œé»æ“Šã€ŒOAuth Configurationã€æŒ‰éˆ•ã€‚è¤‡è£½ **Redirect URL (auto-populated)**ï¼Œå¦‚ `http://localhost:6274/oauth/callback`ã€‚
2. ç™»å…¥ä½ çš„ OpenID Connect æä¾›è€…å¾Œå°ã€‚
3. é€²å…¥ã€Œæ‡‰ç”¨ç¨‹å¼ã€æˆ–ã€Œç”¨æˆ¶ç«¯ã€å€å¡Šï¼Œå»ºç«‹æ–°æ‡‰ç”¨ç¨‹å¼æˆ–ç”¨æˆ¶ç«¯ã€‚
4. è‹¥éœ€é¸æ“‡ç”¨æˆ¶ç«¯é¡å‹ï¼Œè«‹é¸ã€Œå–®é æ‡‰ç”¨ç¨‹å¼ã€æˆ–ã€Œå…¬é–‹ç”¨æˆ¶ç«¯ã€ã€‚
5. å»ºç«‹æ‡‰ç”¨ç¨‹å¼å¾Œï¼Œè¨­å®š redirect URIï¼Œè²¼ä¸Š MCP inspector çš„ **Redirect URL (auto-populated)**ã€‚
6. æ‰¾åˆ°æ–°æ‡‰ç”¨ç¨‹å¼çš„ã€ŒClient IDã€æˆ–ã€ŒApplication IDã€ä¸¦è¤‡è£½ã€‚
7. å›åˆ° MCP inspectorï¼Œå°‡ã€ŒClient IDã€è²¼åˆ°ã€ŒOAuth Configurationã€çš„ã€ŒClient IDã€æ¬„ä½ã€‚
8. æ¨™æº– OIDC æä¾›è€…å¯åœ¨ã€ŒAuth Paramsã€æ¬„ä½è¼¸å…¥ä»¥ä¸‹å…§å®¹ï¼Œä»¥è«‹æ±‚ userinfo endpoint æ‰€éœ€æ¬Šé™ç¯„åœï¼š

```json
{ "scope": "openid profile email" }
```

</TabItem>
<TabItem value="oauth" label="OAuth 2">

:::note
é€™æ˜¯é€šç”¨ OAuth 2.0 / OAuth 2.1 æä¾›è€…æ•´åˆæŒ‡å¼•ï¼Œè«‹æŸ¥é–±ä½ çš„æä¾›è€…æ–‡ä»¶ä»¥ç²å¾—ç´°ç¯€ã€‚
:::

è‹¥ä½ çš„ OAuth 2.0 / OAuth 2.1 æä¾›è€…æ”¯æ´å‹•æ…‹ç”¨æˆ¶ç«¯è¨»å†Šï¼Œå¯ç›´æ¥è·³è‡³ç¬¬ 8 æ­¥è¨­å®š MCP inspectorï¼›å¦å‰‡éœ€æ‰‹å‹•è¨»å†Šï¼š

1. é–‹å•Ÿ MCP inspectorï¼Œé»æ“Šã€ŒOAuth Configurationã€æŒ‰éˆ•ã€‚è¤‡è£½ **Redirect URL (auto-populated)**ï¼Œå¦‚ `http://localhost:6274/oauth/callback`ã€‚
2. ç™»å…¥ä½ çš„ OAuth 2.0 / OAuth 2.1 æä¾›è€…å¾Œå°ã€‚
3. é€²å…¥ã€Œæ‡‰ç”¨ç¨‹å¼ã€æˆ–ã€Œç”¨æˆ¶ç«¯ã€å€å¡Šï¼Œå»ºç«‹æ–°æ‡‰ç”¨ç¨‹å¼æˆ–ç”¨æˆ¶ç«¯ã€‚
4. è‹¥éœ€é¸æ“‡ç”¨æˆ¶ç«¯é¡å‹ï¼Œè«‹é¸ã€Œå–®é æ‡‰ç”¨ç¨‹å¼ã€æˆ–ã€Œå…¬é–‹ç”¨æˆ¶ç«¯ã€ã€‚
5. å»ºç«‹æ‡‰ç”¨ç¨‹å¼å¾Œï¼Œè¨­å®š redirect URIï¼Œè²¼ä¸Š MCP inspector çš„ **Redirect URL (auto-populated)**ã€‚
6. æ‰¾åˆ°æ–°æ‡‰ç”¨ç¨‹å¼çš„ã€ŒClient IDã€æˆ–ã€ŒApplication IDã€ä¸¦è¤‡è£½ã€‚
7. å›åˆ° MCP inspectorï¼Œå°‡ã€ŒClient IDã€è²¼åˆ°ã€ŒOAuth Configurationã€çš„ã€ŒClient IDã€æ¬„ä½ã€‚
8. è«‹æŸ¥é–±ä½ çš„æä¾›è€…æ–‡ä»¶ï¼Œç­è§£å¦‚ä½•å–å¾—ç”¨æ–¼èº«åˆ†è³‡è¨Šçš„å­˜å–æ¬Šæ– (Access token)ã€‚ä½ å¯èƒ½éœ€æŒ‡å®šæ¬Šé™ç¯„åœæˆ–åƒæ•¸ã€‚ä¾‹å¦‚ï¼Œè‹¥éœ€ `profile` æ¬Šé™ç¯„åœï¼Œå¯åœ¨ã€ŒAuth Paramsã€æ¬„ä½è¼¸å…¥ï¼š

```json
{ "scope": "profile" }
```

</TabItem>
</Tabs>

### è¨­å®š MCP Auth (Set up MCP auth) \{#set-up-mcp-auth}

åœ¨ä½ çš„ MCP ä¼ºæœå™¨å°ˆæ¡ˆä¸­ï¼Œéœ€å®‰è£ MCP Auth SDK ä¸¦è¨­å®šä½¿ç”¨ä½ çš„æˆæ¬Šä¼ºæœå™¨ä¸­ç¹¼è³‡æ–™ã€‚

<Tabs groupId="sdk">
<TabItem value="python" label="Python">

é¦–å…ˆå®‰è£ `mcpauth` å¥—ä»¶ï¼š

```bash
pip install mcpauth
```

æˆ–ä½¿ç”¨ä½ åå¥½çš„å¥—ä»¶ç®¡ç†å·¥å…·ï¼Œå¦‚ `uv` æˆ– `poetry`ã€‚

</TabItem>
<TabItem value="node" label="Node.js">

é¦–å…ˆå®‰è£ `mcp-auth` å¥—ä»¶ï¼š

```bash
npm install mcp-auth
```

</TabItem>
</Tabs>

MCP Auth éœ€è¦æˆæ¬Šä¼ºæœå™¨ä¸­ç¹¼è³‡æ–™æ‰èƒ½åˆå§‹åŒ–ã€‚æ ¹æ“šä½ çš„æä¾›è€…ï¼š

<Tabs groupId="provider">

<TabItem value="logto" label="Logto">

ç°½ç™¼è€… (Issuer) URL å¯åœ¨ Logto Console çš„æ‡‰ç”¨ç¨‹å¼è©³æƒ…é ã€ŒEndpoints & Credentials / Issuer endpointã€å€å¡Šæ‰¾åˆ°ï¼Œæ ¼å¼é¡ä¼¼ `https://my-project.logto.app/oidc`ã€‚

<SetupOidc />

</TabItem>

<TabItem value="keycloak" label="Keycloak">

ç°½ç™¼è€… (Issuer) URL å¯åœ¨ Keycloak ç®¡ç†å¾Œå°çš„ã€Œmcp-realmã€ä¸‹ã€ŒRealm settings / Endpointsã€å€å¡Šï¼Œé»é¸ã€ŒOpenID Endpoint Configurationã€é€£çµã€‚JSON æ–‡ä»¶ä¸­çš„ `issuer` æ¬„ä½å³ç‚ºä½ çš„ issuer URLï¼Œæ ¼å¼é¡ä¼¼ `http://localhost:8080/realms/mcp-realm`ã€‚

<SetupOidc />

</TabItem>

<TabItem value="oidc" label="OIDC">

ä»¥ä¸‹ç¨‹å¼ç¢¼å‡è¨­æˆæ¬Šä¼ºæœå™¨æ”¯æ´ [userinfo endpoint](https://openid.net/specs/openid-connect-core-1_0.html#UserInfo) ä»¥å–å¾—ä½¿ç”¨è€…èº«åˆ†è³‡è¨Šã€‚è‹¥ä½ çš„æä¾›è€…ä¸æ”¯æ´ï¼Œè«‹æŸ¥é–±æ–‡ä»¶ä¸¦ä»¥æ­£ç¢º URL å–ä»£ userinfo endpoint è®Šæ•¸ã€‚

<SetupOidc showAlternative />

</TabItem>
<TabItem value="oauth" label="OAuth 2">

å¦‚å‰æ‰€è¿°ï¼ŒOAuth 2.0 æ²’æœ‰å®šç¾©æ¨™æº–æ–¹å¼ä¾†å–å¾—ä½¿ç”¨è€…èº«åˆ†è³‡è¨Šã€‚ä»¥ä¸‹ç¨‹å¼ç¢¼å‡è¨­ä½ çš„æä¾›è€…æœ‰ç‰¹å®š endpoint å¯ç”¨å­˜å–æ¬Šæ– (Access token) å–å¾—èº«åˆ†è³‡è¨Šã€‚è«‹æŸ¥é–±æ–‡ä»¶ä¸¦ä»¥æ­£ç¢º URL å–ä»£ userinfo endpoint è®Šæ•¸ã€‚

<SetupOauth />

</TabItem>
</Tabs>

### æ›´æ–° MCP ä¼ºæœå™¨ (Update MCP server) \{#update-mcp-server}

å¿«å®Œæˆäº†ï¼ç¾åœ¨è¦æ›´æ–° MCP ä¼ºæœå™¨ï¼Œå¥—ç”¨ MCP Auth è·¯ç”±èˆ‡ä¸­ä»‹è»Ÿé«”ï¼Œä¸¦è®“ `whoami` å·¥å…·å›å‚³å¯¦éš›çš„ä½¿ç”¨è€…èº«åˆ†è³‡è¨Šã€‚

<Tabs groupId="sdk">
<TabItem value="python" label="Python">

```python
@mcp.tool()
def whoami() -> dict[str, Any]:
    """å›å‚³ç›®å‰ä½¿ç”¨è€…è³‡è¨Šçš„å·¥å…·ã€‚"""
    return (
        mcp_auth.auth_info.claims
        if mcp_auth.auth_info # ç”± Bearer auth middleware å¡«å…¥
        else {"error": "Not authenticated"}
    )

# ...

bearer_auth = Middleware(mcp_auth.bearer_auth_middleware(verify_access_token))
app = Starlette(
    routes=[
        # åŠ å…¥ metadata è·¯ç”± (`/.well-known/oauth-authorization-server`)
        mcp_auth.metadata_route(),
        # ä»¥ Bearer auth middleware ä¿è­· MCP ä¼ºæœå™¨
        Mount('/', app=mcp.sse_app(), middleware=[bearer_auth]),
    ],
)
```

</TabItem>
<TabItem value="node" label="Node.js">

```js
server.tool('whoami', ({ authInfo }) => {
  return {
    content: [
      { type: 'text', text: JSON.stringify(authInfo?.claims ?? { error: 'Not authenticated' }) },
    ],
  };
});

// ...

app.use(mcpAuth.delegatedRouter());
app.use(mcpAuth.bearerAuth(verifyToken));
```

</TabItem>
</Tabs>

## æª¢æŸ¥é»ï¼šä»¥é©—è­‰ (Authentication) åŸ·è¡Œ `whoami` å·¥å…· (Checkpoint: Run the `whoami` tool with authentication) \{#checkpoint-run-the-whoami-tool-with-authentication}

é‡æ–°å•Ÿå‹• MCP ä¼ºæœå™¨ï¼Œä¸¦åœ¨ç€è¦½å™¨é–‹å•Ÿ MCP inspectorã€‚ç•¶ä½ é»æ“Šã€ŒConnectã€æŒ‰éˆ•æ™‚ï¼Œæ‡‰æœƒè¢«å°å‘æˆæ¬Šä¼ºæœå™¨çš„ç™»å…¥é é¢ã€‚

ç™»å…¥å¾Œå›åˆ° MCP inspectorï¼Œé‡è¤‡å‰è¿°æ­¥é©ŸåŸ·è¡Œ `whoami` å·¥å…·ã€‚é€™æ¬¡ä½ æ‡‰è©²æœƒçœ‹åˆ°æˆæ¬Šä¼ºæœå™¨å›å‚³çš„ä½¿ç”¨è€…èº«åˆ†è³‡è¨Šã€‚

![MCP inspector whoami å·¥å…·çµæœ](/docs-assets/images/tutorials/whoami/result.png)

<Tabs groupId="sdk">
<TabItem value="python" label="Python">

:::info
å®Œæ•´ MCP ä¼ºæœå™¨ï¼ˆOIDC ç‰ˆæœ¬ï¼‰ç¨‹å¼ç¢¼è«‹åƒè€ƒ [MCP Auth Python SDK repository](https://github.com/mcp-auth/python/blob/master/samples/server/whoami.py)ã€‚
:::

</TabItem>
<TabItem value="node" label="Node.js">

:::info
å®Œæ•´ MCP ä¼ºæœå™¨ï¼ˆOIDC ç‰ˆæœ¬ï¼‰ç¨‹å¼ç¢¼è«‹åƒè€ƒ [MCP Auth Node.js SDK repository](https://github.com/mcp-auth/js/blob/master/packages/sample-servers/src)ã€‚è©²ç›®éŒ„åŒæ™‚åŒ…å« TypeScript èˆ‡ JavaScript ç‰ˆæœ¬ã€‚
:::

</TabItem>
</Tabs>

## çµèª (Closing notes) \{#closing-notes}

ğŸŠ æ­å–œä½ ï¼å·²æˆåŠŸå®Œæˆæœ¬æ•™å­¸ã€‚è®“æˆ‘å€‘å›é¡§ä¸€ä¸‹ï¼š

- å»ºç«‹å…·å‚™ `whoami` å·¥å…·çš„åŸºæœ¬ MCP ä¼ºæœå™¨
- é€é MCP Auth å°‡ MCP ä¼ºæœå™¨èˆ‡æˆæ¬Šä¼ºæœå™¨æ•´åˆ
- è¨­å®š MCP Inspector ä»¥é©—è­‰ (Authentication) ä½¿ç”¨è€…ä¸¦å–å¾—å…¶èº«åˆ†è³‡è¨Š

ä½ ä¹Ÿå¯ä»¥é€²ä¸€æ­¥æ¢ç´¢é€²éšä¸»é¡Œï¼ŒåŒ…æ‹¬ï¼š

- ä½¿ç”¨ [JWT (JSON Web Token)](https://auth.wiki/jwt) é€²è¡Œé©—è­‰ (Authentication) èˆ‡æˆæ¬Š (Authorization)
- åˆ©ç”¨ [è³‡æºæ¨™ç¤ºç¬¦ (Resource indicators, RFC 8707)](https://auth-wiki.logto.io/resource-indicator) æŒ‡å®šå­˜å–è³‡æº
- å¯¦ä½œè‡ªè¨‚å­˜å–æ§åˆ¶æ©Ÿåˆ¶ï¼Œå¦‚ [åŸºæ–¼è§’è‰²çš„å­˜å–æ§åˆ¶ (RBAC, Role-based access control)](https://auth.wiki/rbac) æˆ– [å±¬æ€§å‹å­˜å–æ§åˆ¶ (ABAC, Attribute-based access control)](https://auth.wiki/abac)

æ­¡è¿åƒé–±å…¶ä»–æ•™å­¸èˆ‡æ–‡ä»¶ï¼Œå……åˆ†ç™¼æ® MCP Auth çš„æ•ˆèƒ½ã€‚